<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap namespace="boardSQL">
	<typeAlias alias="dto" type="org.kh.board.BoardDataBean" />

	<select id="count" resultClass="int">
		select count(no) from board
	</select>

	<sql id="c-list1">
		num, writer, subject, email, content, passwd, reg_date,
		readcount, ip, ref, re_step, re_level
	</sql>

	<sql id="st-select1">
		SELECT
		<include refid="c-list1" />
	</sql>

	<select id="getArticles" resultClass="dto" parameterClass="java.util.HashMap">
		<include refid="st-select1" /><![CDATA[
				,r
			FROM (
		]]><include refid="st-select1" /><![CDATA[
					rownum r
				FROM (
		]]><include refid="st-select1" /><![CDATA[
					FROM board
					ORDER BY ref DESC, re_step ASC
				) ORDER BY ref DESC, re_step ASC
			) WHERE r >= #start# AND r <= #end#
			]]>
	</select>

</sqlMap>